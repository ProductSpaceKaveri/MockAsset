import{createContext as e,useState as t,useRef as n,useEffect as i,useCallback as o,useMemo as l,createElement as s,useLayoutEffect as r}from"react";import{and as a}from"mendix/filters/builders";var c;!function(e){e.STRING="string",e.NUMBER="number",e.ENUMERATION="enum",e.DATE="date",e.ASSOCIATION="association"}(c||(c={}));const u="com.mendix.widgets.web.filterable.filterContext";function d(){const t=window[u];if(t)return{FilterContext:t};const n=e(void 0);return window[u]=n,{FilterContext:n}}const g=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function h(e,t){if(function(e){return g(e,"arg1")&&g(e,"arg2")}(e)&&"attribute"===e.arg1.type&&e.arg1.attributeId===t.id&&(n=e.arg2,g(n,"type")&&g(n,"value")))return{type:e.name,value:e.arg2.value};var n}function p(e,t){var n;if(!e||!t)return[];return(null!==(n=v(t))&&void 0!==n?n:[]).flatMap((t=>{const n=h(t,e);return n?[n]:[]}))}function v(e){return!e||"function"!==e.type||"and"!==e.name&&"or"!==e.name?e?[e]:void 0:e.args.flatMap(v).filter((e=>void 0!==e))}const m=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class f{constructor(e){this.selectionValue=e,this.type="Single"}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}add(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class w{constructor(e,t){this.selectionValue=e,this.selectableItems=t,this.type="Multi",this.rangeStart=void 0}isSelected(e){return this.selectionValue.selection.some((t=>t.id===e.id))}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){return 0===this.selectionValue.selection.length?"none":this.selectionValue.selection.length===this.selectableItems.length?"all":"some"}add(e){this._add(e),this._setRangeStart(e),this._setRangeEnd(void 0)}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter((t=>t.id!==e.id))),this._resetRange()}reduceTo(e){this.selectionValue.setSelection([e]),this._setRangeStart(e),this._setRangeEnd(void 0)}_add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}_setRangeStart(e){let t=-1;void 0!==e&&(t=this.selectableItems.indexOf(e)),this.rangeStart=t>-1?t:void 0}_setRangeEnd(e){if(void 0===e)return void(this.rangeEnd=void 0);const t=this.rangeEnd,n=this.selectableItems.indexOf(e);this.rangeEnd=n>-1?n:void 0,this._updateSelectionWithRange(this.rangeStart,t,n)}_updateSelectionWithRange(e,t,n){if(void 0===e)return;if(-1===n)return;if(t===n)return;if(void 0===t){const t=this._getRange(e,n),i=this._union(this.selectionValue.selection,t);return void this.selectionValue.setSelection(i)}const i=this._getRange(e,t),o=this._getRange(e,n);let l=[...this.selectionValue.selection];l=this._diff(l,i),l=this._union(l,o),this.selectionValue.setSelection(l)}_getRange(e,t){const n=this.selectableItems.length,[i,o]=[b(e,0,n),b(t,0,n)].sort(((e,t)=>e-t));return this.selectableItems.slice(i,o+1)}_resetRange(){this._setRangeStart(void 0),this._setRangeEnd(void 0)}_union(e,t){const n=[...e],i=new Set(e.map((e=>e.id)));for(const e of t)i.has(e.id)||(i.add(e.id),n.push(e));return n}_diff(e,t){const n=new Set(e),i=new Set(t.map((e=>e.id)));for(const e of n)i.has(e.id)&&n.delete(e);return Array.from(n)}selectAll(){this.selectionValue.setSelection(this.selectableItems),this._resetRange()}selectNone(){this.selectionValue.setSelection([]),this._resetRange()}selectUpTo(e){void 0===this.rangeStart?(this._add(e),this._setRangeStart(e)):this._setRangeEnd(e)}_getAdjacentIndex(e,t,n){const i=this.selectableItems.length-1,o="forward"===t;if("edge"===n)return o?i:0;return b(o?e+n:e-n,0,i)}selectUpToAdjacent(e,t,n,i){if(!1===t)return void this._resetRange();const o=this.selectableItems.findIndex((t=>t.id===e.id)),l=this._getAdjacentIndex(o,n,i);l!==o&&(void 0===this.rangeStart&&this._setRangeStart(e),this._setRangeEnd(this.selectableItems.at(l)))}}const b=(e,t,n)=>Math.min(Math.max(e,t),n);function y(e,t,o){const l=n([]),s=n(!1);s.current||(s.current="loading"!==(null==t?void 0:t.status)),i((()=>{var t;const n=l.current,i=null!==(t=null==e?void 0:e.selection)&&void 0!==t?t:[],r=Array.isArray(i)?i:[i];(function(e,t){if(e.length!==t.length)return!1;const n=new Set(t.map((e=>e.id)));return e.every((e=>n.has(e.id)))})(n,r)||(l.current=r,s.current&&m(o))}),[null==e?void 0:e.selection,o]);const r=n(void 0);var a,c;void 0!==e&&("Single"===e.type?r.current?r.current.updateProps(e):r.current=new f(e):r.current?r.current.updateProps(e,null!==(a=t.items)&&void 0!==a?a:[]):r.current=new w(e,null!==(c=t.items)&&void 0!==c?c:[]));return r.current}const S=new Set(["KeyA","MetaLeft","MetaRight","ControlLeft","ControlRight"]),C=(e,t)=>{let n=!1;const[i,o]=function(e,t){let n=0,i=0;return[function(){for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];const r=(new Date).getTime()-i,a=()=>{n=0,i=(new Date).getTime(),e(...l)};n||(r>=t?a():n=window.setTimeout(a,t-r))},()=>{clearTimeout(n),n=0}]}((()=>{n=!0,e()}),500);return[{eventName:"onKeyDown",filter:(e,t)=>"Multi"===e.selectionType&&function(e){return"KeyA"===e.code&&(e.metaKey||e.ctrlKey)}(t),handler:i},{eventName:"onKeyUp",filter:(e,t)=>"Multi"===e.selectionType&&S.has(t.code)&&n,handler:()=>{n=!1,o(),null==t||t()}}]},I="com.mendix.widgets.web.selectable.selectionContext";class x{constructor(e,t){var n=this;this.selection=e,this.selectionHelper=t,this.onSelect=function(){n.selectionHelper&&("Multi"===n.selectionHelper.type?n._onSelectItemMulti(...arguments):n._onSelectItemSingle(...arguments))},this._onSelectItemMulti=(e,t,n)=>{var i;"Multi"===(null===(i=this.selectionHelper)||void 0===i?void 0:i.type)&&(t?this.selectionHelper.selectUpTo(e):this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):n?this.selectionHelper.add(e):this.selectionHelper.reduceTo(e))},this._onSelectItemSingle=e=>{var t;"Single"===(null===(t=this.selectionHelper)||void 0===t?void 0:t.type)&&(this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):this.selectionHelper.add(e))},this.onSelectAll=e=>{this.selectionHelper&&("Single"!==this.selectionHelper.type?"selectAll"!==e&&"all"===this.selectionHelper.selectionStatus?this.selectionHelper.selectNone():this.selectionHelper.selectAll():console.warn("Datagrid: calling onSelectAll in single selection mode have no effect"))},this.onSelectAdjacent=function(){var e;"Multi"===(null===(e=n.selectionHelper)||void 0===e?void 0:e.type)&&n.selectionHelper.selectUpToAdjacent(...arguments)},this.isSelected=e=>!!this.selectionHelper&&this.selectionHelper.isSelected(e)}get selectionType(){if(void 0===this.selection)return"None";if("object"==typeof this.selection)return this.selection.type;if("None"===this.selection||"Single"===this.selection||"Multi"===this.selection)return this.selection;throw new Error("Unknown selection type: ".concat(this.selection))}}function P(){const t=window["com.mendix.widgets.web.sortable.sortContext"];if(t)return{SortContext:t};const n=e(void 0);return window["com.mendix.widgets.web.sortable.sortContext"]=n,{SortContext:n}}function N(e){let{direction:t}=e;const n="pagination-icon ".concat(t);switch(t){case"forward":return s("span",{"aria-hidden":!0},s("svg",{className:n,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),s("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})));case"step-forward":return s("span",{"aria-hidden":!0},s("svg",{className:n,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),s("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})));case"backward":return s("span",{"aria-hidden":!0},s("svg",{className:n,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),s("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})));case"step-backward":return s("span",{"aria-hidden":!0},s("svg",{className:n,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),s("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})));default:return s("div",null)}}function M(e){var t,n,i,o,l,r,a;const c=void 0!==e.numberOfItems?Math.ceil(e.numberOfItems/e.pageSize):void 0,u=void 0!==c?c-1:0,d=void 0!==c,g=e.page*e.pageSize+1,h=e.canNextPage||!e.numberOfItems?(e.page+1)*e.pageSize:e.numberOfItems,p=t=>{e.setPaginationIndex&&e.setPaginationIndex(t)};if(0===e.numberOfItems)return null;const v="".concat(g," to ").concat(h," ").concat(d?"of ".concat(null!==(t=e.numberOfItems)&&void 0!==t?t:(null!=c?c:1)*e.pageSize):"");return s("div",{"aria-label":null!==(n=e.labelPagination)&&void 0!==n?n:"Pagination",className:"pagination-bar"},s("button",{className:"btn pagination-button",disabled:0===e.page,...V((()=>{e.gotoPage(0),p(0)})),"aria-label":null!==(i=e.labelFirstPage)&&void 0!==i?i:"Go to first page"},s(N,{direction:"step-backward"})),s("button",{className:"btn pagination-button",disabled:!e.canPreviousPage,...V((()=>{e.previousPage(),p(e.page-1)})),"aria-label":null!==(o=e.labelPreviousPage)&&void 0!==o?o:"Go to previous page"},s(N,{direction:"backward"})),s("span",{className:"sr-only sr-only-focusable"},null!==(l=e.labelPagingStatus)&&void 0!==l?l:"Currently showing"," ",v),s("div",{"aria-hidden":!0,className:"paging-status"},v),s("button",{"aria-label":null!==(r=e.labelNextPage)&&void 0!==r?r:"Go to next page",className:"btn pagination-button",disabled:!e.canNextPage,...V((()=>{e.nextPage(),p(e.page+1)}))},s(N,{direction:"forward"})),d&&s("button",{"aria-label":null!==(a=e.labelLastPage)&&void 0!==a?a:"Go to last page",className:"btn pagination-button",disabled:e.page===u,...V((()=>{e.gotoPage(u),p(u)}))},s(N,{direction:"step-forward"})))}function V(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}var k,T={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/k=T,function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var l=typeof o;if("string"===l||"number"===l)n.push(o);else if(Array.isArray(o)){if(o.length){var s=t.apply(null,o);s&&n.push(s)}}else if("object"===l){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var r in o)e.call(o,r)&&o[r]&&n.push(r)}}}return n.join(" ")}k.exports?(t.default=t,k.exports=t):window.classNames=t}();var _=T.exports;function H(e){let{children:t,className:n,selectionType:i,lg:o,md:l,sm:r,...a}=e;const c="None"!==i;return s("div",{...a,className:_("widget-gallery-items","widget-gallery-lg-".concat(o),"widget-gallery-md-".concat(l),"widget-gallery-sm-".concat(r),n),role:c?"listbox":"list","aria-multiselectable":c?"Multi"===i:void 0},t)}function D(e){let{children:t,className:n,helper:i,item:o,selectHelper:r,eventsController:a,...c}=e;const u=i.hasOnClick(o)||"None"!==r.selectionType,d=function(e,t){return"Single"===t.selectionType||"Multi"===t.selectionType?{role:"option","aria-selected":t.isSelected(e),tabIndex:0}:{role:"listitem","aria-selected":void 0,tabIndex:void 0}}(o,r),g=l((()=>a.getProps(o)),[a,o]);return s("div",{...c,className:_("widget-gallery-item",{"widget-gallery-clickable":u,"widget-gallery-selected":d["aria-selected"]},i.itemClass(o)),...d,onClick:g.onClick,onDoubleClick:g.onDoubleClick,onFocus:g.onFocus,onKeyDown:g.onKeyDown,onKeyUp:g.onKeyUp,onMouseDown:g.onMouseDown},i.render(o))}function E(e){var o,l;const[s,r]=t(!1),a=null!==(l=(o=n()).current)&&void 0!==l?l:o.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver((e=>{let[n]=e;t(n.isIntersecting)}))}({setIsIntersecting:r});return i((()=>(e.current&&a.observe(e.current),()=>{a.disconnect()})),[a,e]),s}const R=30;function A(e){let{children:i,className:l,hasMoreItems:a,isInfinite:c,setPage:u}=e;const[d,g,h]=function(e){const{setPage:i,hasMoreItems:l,isInfinite:s}=e,[a,c]=t(0),u=n(null),d=E(u),g=o((e=>{Math.floor(e.target.scrollHeight-R-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&l&&i&&i((e=>e+1))}),[l,i]),h=o((()=>{d&&s&&l&&a<=0&&u.current&&c(u.current.clientHeight-R)}),[s,l,a,d]);return r((()=>{setTimeout((()=>h()),100)}),[h]),[g,a,u]}({hasMoreItems:a,isInfinite:c,setPage:u});return s("div",{className:_("widget-gallery-content",{"infinite-loading":c},l),ref:h,onScroll:c?d:void 0,style:c&&g>0?{maxHeight:g}:void 0},i)}function O(e){let{children:t,className:n,...i}=e;return s("div",{className:_("widget-gallery-footer",n),...i},t)}function L(e){const{children:t}=e;return t?s("section",{...e,className:"widget-gallery-header widget-gallery-filter"}):null}function K(e){const{className:t,selectable:n,children:i,...o}=e;return s("div",{className:_("widget-gallery",{"widget-gallery-selectable":n},t),...o},i)}function F(e){return s("div",{className:"widget-gallery-top-bar"},e.children)}function U(e){const t=e.paging?s("div",{className:"widget-gallery-pagination"},s(M,{canNextPage:e.hasMoreItems,canPreviousPage:0!==e.page,gotoPage:t=>e.setPage&&e.setPage((()=>t)),nextPage:()=>e.setPage&&e.setPage((e=>e+1)),numberOfItems:e.numberOfItems,page:e.page,pageSize:e.pageSize,previousPage:()=>e.setPage&&e.setPage((e=>e-1))})):null,n=e.paging&&"above"===e.paginationPosition,i=e.paging&&"below"===e.paginationPosition;return s(K,{className:e.className,selectable:!1,"data-focusindex":e.tabIndex||0},n&&s(F,null,t),e.showHeader&&s(L,{"aria-label":e.headerTitle},e.header),s(A,{hasMoreItems:e.hasMoreItems,setPage:e.setPage,isInfinite:!e.paging},e.items.length>0&&s(H,{lg:e.desktopItems,md:e.tabletItems,sm:e.phoneItems,selectionType:e.selectHelper.selectionType,"aria-label":e.ariaLabelListBox},e.items.map((t=>s(D,{key:"item_".concat(t.id),helper:e.itemHelper,item:t,selectHelper:e.selectHelper,eventsController:e.itemEventsController}))))),(0===e.items.length||e.showEmptyStatePreview)&&e.emptyPlaceholderRenderer&&e.emptyPlaceholderRenderer((t=>s("section",{className:"widget-gallery-empty","aria-label":e.emptyMessageTitle},s("div",{className:"empty-placeholder"},t)))),i&&s(O,null,t))}function z(e){return s("div",{...e,...j,className:_("widget-gallery-item-button",e.className),role:"button",tabIndex:0})}const j=function(){let e=!1;return{onKeyDown:t=>{B(t)&&(G(t),Z(t)&&(e=!0))},onKeyUp:t=>{B(t)&&Z(t)&&e&&(G(t),t.currentTarget.dispatchEvent(new MouseEvent("click",{bubbles:!0})),e=!1)}}}();function B(e){return"Enter"===e.code||"Space"===e.code}function Z(e){return e.currentTarget===e.target}function G(e){e.stopPropagation(),e.preventDefault()}class W{constructor(e,t,n){this._classValue=e,this._contentValue=t,this._clickValue=n}itemClass(e){var t;return null===(t=this._classValue)||void 0===t?void 0:t.get(e).value}render(e){var t,n;return this.hasOnClick(e)?s(z,{onClick:()=>{var t;return m(null===(t=this._clickValue)||void 0===t?void 0:t.get(e))}},null===(t=this._contentValue)||void 0===t?void 0:t.get(e)):null===(n=this._contentValue)||void 0===n?void 0:n.get(e)}hasOnClick(e){var t;return!!(null===(t=this._clickValue)||void 0===t?void 0:t.get(e))}}class q extends x{}function Y(e,t,n){const i=e();(!n.filter||n.filter(i,t))&&n.handler(i,t)}function J(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}const Q=()=>{Q.timeoutId&&clearTimeout(Q.timeoutId),Q.timeoutId=window.setTimeout((()=>{J(),document.body.style.userSelect="",Q.timeoutId=void 0}),250)},X=e=>({eventName:"onClick",filter:e=>"None"!==e.selectionType,handler:(t,n)=>{let{item:i}=t;const o=n.metaKey||n.ctrlKey;e(i,n.shiftKey,o)}});function $(e,t){return[X(e),(n=J,{eventName:"onMouseDown",filter:e=>"None"!==e.selectionType,handler:n}),...C((()=>{document.body.style.userSelect="none",t("selectAll")}),(()=>{Q()}))];var n}class ee{constructor(e,t,n){this.contextFactory=e,this.selectFx=t,this.selectAllFx=n,this.getProps=e=>function(e,t){const n=function(e){return e.reduce(((e,t)=>{var n,i,o,l,s,r;switch(t.eventName){case"onClick":e.onClick=null!==(n=e.onClick)&&void 0!==n?n:[],e.onClick.push(t);break;case"onDoubleClick":e.onDoubleClick=null!==(i=e.onDoubleClick)&&void 0!==i?i:[],e.onDoubleClick.push(t);break;case"onKeyDown":e.onKeyDown=null!==(o=e.onKeyDown)&&void 0!==o?o:[],e.onKeyDown.push(t);break;case"onKeyUp":e.onKeyUp=null!==(l=e.onKeyUp)&&void 0!==l?l:[],e.onKeyUp.push(t);break;case"onMouseDown":e.onMouseDown=null!==(s=e.onMouseDown)&&void 0!==s?s:[],e.onMouseDown.push(t);break;case"onFocus":e.onFocus=null!==(r=e.onFocus)&&void 0!==r?r:[],e.onFocus.push(t)}return e}),{})}(t);return{onClick(t){var i;null===(i=n.onClick)||void 0===i||i.forEach((n=>Y(e,t,n)))},onDoubleClick(t){var i;null===(i=n.onDoubleClick)||void 0===i||i.forEach((n=>Y(e,t,n)))},onKeyUp(t){var i;null===(i=n.onKeyUp)||void 0===i||i.forEach((n=>Y(e,t,n)))},onKeyDown(t){var i;null===(i=n.onKeyDown)||void 0===i||i.forEach((n=>Y(e,t,n)))},onMouseDown(t){var i;null===(i=n.onMouseDown)||void 0===i||i.forEach((n=>Y(e,t,n)))},onFocus(t){var i;null===(i=n.onFocus)||void 0===i||i.forEach((n=>Y(e,t,n)))}}}((()=>this.contextFactory(e)),[...$(this.selectFx,this.selectAllFx)])}}function te(r){var u,g,h,v,m;const f=n(void 0),w=n(void 0),[b,S]=t(!1),[C,x]=t(!1),N={[c.STRING]:t(),[c.NUMBER]:t(),[c.DATE]:t(),[c.ENUMERATION]:t(),[c.ASSOCIATION]:t()},[M,V]=t(),{FilterContext:k}=d(),{SortContext:T}=P(),_=(void 0===window[I]&&(window[I]=e(void 0)),window[I]),H="virtualScrolling"===r.pagination,D=H?r.datasource.limit/r.pageSize:r.datasource.offset/r.pageSize;i((()=>{r.datasource.requestTotalCount(!H),r.datasource.limit===Number.POSITIVE_INFINITY&&r.datasource.setLimit(r.pageSize)}),[r.datasource,r.pageSize,H]),i((()=>{!r.datasource.filter||b||f.current||(f.current=r.datasource.filter),!r.datasource.sortOrder||C||w.current||(w.current=r.datasource.sortOrder)}),[r.datasource,b,C]);const E=l((()=>r.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:n}}),{})),[r.filterList]),R=l((()=>r.sortList.map((e=>{let{attribute:t,caption:n}=e;var i;return{attribute:t,caption:null!==(i=n.value)&&void 0!==i?i:""}}))),[r.sortList]),A=l((()=>r.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:p(n,f.current)}}),{})),[r.filterList,f.current]),O=Object.keys(N).map((e=>{var t;return null===(t=N[e][0])||void 0===t?void 0:t.getFilterCondition()})).filter((e=>void 0!==e));if(O.length>0?r.datasource.setFilter(O.length>1?a(...O):O[0]):b?r.datasource.setFilter(void 0):r.datasource.setFilter(f.current),M&&"getSortCondition"in M){const e=M.getSortCondition();r.datasource.setSortOrder(e?[e]:void 0)}else r.datasource.setSortOrder(void 0);const L=o((e=>{const t=e(D);H?r.datasource.setLimit(t*r.pageSize):r.datasource.setOffset(t*r.pageSize)}),[r.datasource,r.pageSize,H,D]),K=y(r.itemSelection,r.datasource,r.onSelectionChange),F=function(e,t){return l((()=>new q(e,t)),[t])}(r.itemSelection,K),z=function(e){return l((()=>new ee((t=>({item:t,selectionType:e.selectionType})),e.onSelect,e.onSelectAll)),[e])}(F),j=function(e){const t=o((()=>{"Multi"===(null==e?void 0:e.type)&&("all"===e.selectionStatus?e.selectNone():e.selectAll())}),[e]),n="Multi"===(null==e?void 0:e.type)?e.selectionStatus:void 0;return l((()=>{if(void 0!==n)return{status:n,toggle:t}}),[n,t])}(K),B=r.filterList.length>0||r.sortList.length>0||"Multi"===(null==K?void 0:K.type),Z=(G={classValue:r.itemClass,contentValue:r.content,clickValue:r.onClick},l((()=>new W(G.classValue,G.contentValue,G.clickValue)),[G.classValue,G.contentValue,G.clickValue]));var G;return s(U,{className:r.class,desktopItems:r.desktopItems,emptyPlaceholderRenderer:o((e=>"custom"===r.showEmptyPlaceholder?e(r.emptyPlaceholder):s("div",null)),[r.emptyPlaceholder,r.showEmptyPlaceholder]),emptyMessageTitle:null===(u=r.emptyMessageTitle)||void 0===u?void 0:u.value,header:l((()=>B?s(k.Provider,{value:{filterDispatcher:e=>{if(e.filterType){const[,t]=N[e.filterType];t(e),S(!0)}return e},multipleAttributes:E,multipleInitialFilters:A}},s(T.Provider,{value:{sortDispatcher:e=>(x(!0),V(e),e),attributes:R,initialSort:w.current}},s(_.Provider,{value:j},r.filtersPlaceholder))):null),[k,T,N,E,A,B,r.filtersPlaceholder,R]),headerTitle:null===(g=r.filterSectionTitle)||void 0===g?void 0:g.value,ariaLabelListBox:null===(h=r.ariaLabelListBox)||void 0===h?void 0:h.value,showHeader:B,hasMoreItems:null!==(v=r.datasource.hasMoreItems)&&void 0!==v&&v,items:null!==(m=r.datasource.items)&&void 0!==m?m:[],itemHelper:Z,numberOfItems:r.datasource.totalCount,page:D,pageSize:r.pageSize,paging:"buttons"===r.pagination,paginationPosition:r.pagingPosition,phoneItems:r.phoneItems,setPage:L,tabletItems:r.tabletItems,tabIndex:r.tabIndex,selectHelper:F,itemEventsController:z})}export{te as Gallery};
