define(["exports","react","mendix/filters/builders"],(function(e,t,n){"use strict";var l;!function(e){e.STRING="string",e.NUMBER="number",e.ENUMERATION="enum",e.DATE="date",e.ASSOCIATION="association"}(l||(l={}));const i="com.mendix.widgets.web.filterable.filterContext";function o(){const e=window[i];if(e)return{FilterContext:e};const n=t.createContext(void 0);return window[i]=n,{FilterContext:n}}const s=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function a(e,t){if(function(e){return s(e,"arg1")&&s(e,"arg2")}(e)&&"attribute"===e.arg1.type&&e.arg1.attributeId===t.id&&(n=e.arg2,s(n,"type")&&s(n,"value")))return{type:e.name,value:e.arg2.value};var n}function r(e,t){var n;if(!e||!t)return[];return(null!==(n=c(t))&&void 0!==n?n:[]).flatMap((t=>{const n=a(t,e);return n?[n]:[]}))}function c(e){return!e||"function"!==e.type||"and"!==e.name&&"or"!==e.name?e?[e]:void 0:e.args.flatMap(c).filter((e=>void 0!==e))}const u=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class d{constructor(e){this.selectionValue=e,this.type="Single"}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}add(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class g{constructor(e,t){this.selectionValue=e,this.selectableItems=t,this.type="Multi",this.rangeStart=void 0}isSelected(e){return this.selectionValue.selection.some((t=>t.id===e.id))}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){return 0===this.selectionValue.selection.length?"none":this.selectionValue.selection.length===this.selectableItems.length?"all":"some"}add(e){this._add(e),this._setRangeStart(e),this._setRangeEnd(void 0)}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter((t=>t.id!==e.id))),this._resetRange()}reduceTo(e){this.selectionValue.setSelection([e]),this._setRangeStart(e),this._setRangeEnd(void 0)}_add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}_setRangeStart(e){let t=-1;void 0!==e&&(t=this.selectableItems.indexOf(e)),this.rangeStart=t>-1?t:void 0}_setRangeEnd(e){if(void 0===e)return void(this.rangeEnd=void 0);const t=this.rangeEnd,n=this.selectableItems.indexOf(e);this.rangeEnd=n>-1?n:void 0,this._updateSelectionWithRange(this.rangeStart,t,n)}_updateSelectionWithRange(e,t,n){if(void 0===e)return;if(-1===n)return;if(t===n)return;if(void 0===t){const t=this._getRange(e,n),l=this._union(this.selectionValue.selection,t);return void this.selectionValue.setSelection(l)}const l=this._getRange(e,t),i=this._getRange(e,n);let o=[...this.selectionValue.selection];o=this._diff(o,l),o=this._union(o,i),this.selectionValue.setSelection(o)}_getRange(e,t){const n=this.selectableItems.length,[l,i]=[m(e,0,n),m(t,0,n)].sort(((e,t)=>e-t));return this.selectableItems.slice(l,i+1)}_resetRange(){this._setRangeStart(void 0),this._setRangeEnd(void 0)}_union(e,t){const n=[...e],l=new Set(e.map((e=>e.id)));for(const e of t)l.has(e.id)||(l.add(e.id),n.push(e));return n}_diff(e,t){const n=new Set(e),l=new Set(t.map((e=>e.id)));for(const e of n)l.has(e.id)&&n.delete(e);return Array.from(n)}selectAll(){this.selectionValue.setSelection(this.selectableItems),this._resetRange()}selectNone(){this.selectionValue.setSelection([]),this._resetRange()}selectUpTo(e){void 0===this.rangeStart?(this._add(e),this._setRangeStart(e)):this._setRangeEnd(e)}_getAdjacentIndex(e,t,n){const l=this.selectableItems.length-1,i="forward"===t;if("edge"===n)return i?l:0;return m(i?e+n:e-n,0,l)}selectUpToAdjacent(e,t,n,l){if(!1===t)return void this._resetRange();const i=this.selectableItems.findIndex((t=>t.id===e.id)),o=this._getAdjacentIndex(i,n,l);o!==i&&(void 0===this.rangeStart&&this._setRangeStart(e),this._setRangeEnd(this.selectableItems.at(o)))}}const m=(e,t,n)=>Math.min(Math.max(e,t),n);function h(e,n,l){const i=t.useRef([]),o=t.useRef(!1);o.current||(o.current="loading"!==(null==n?void 0:n.status)),t.useEffect((()=>{var t;const n=i.current,s=null!==(t=null==e?void 0:e.selection)&&void 0!==t?t:[],a=Array.isArray(s)?s:[s];(function(e,t){if(e.length!==t.length)return!1;const n=new Set(t.map((e=>e.id)));return e.every((e=>n.has(e.id)))})(n,a)||(i.current=a,o.current&&u(l))}),[null==e?void 0:e.selection,l]);const s=t.useRef(void 0);var a,r;void 0!==e&&("Single"===e.type?s.current?s.current.updateProps(e):s.current=new d(e):s.current?s.current.updateProps(e,null!==(a=n.items)&&void 0!==a?a:[]):s.current=new g(e,null!==(r=n.items)&&void 0!==r?r:[]));return s.current}const p=new Set(["KeyA","MetaLeft","MetaRight","ControlLeft","ControlRight"]),v=(e,t)=>{let n=!1;const[l,i]=function(e,t){let n=0,l=0;return[function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];const a=(new Date).getTime()-l,r=()=>{n=0,l=(new Date).getTime(),e(...o)};n||(a>=t?r():n=window.setTimeout(r,t-a))},()=>{clearTimeout(n),n=0}]}((()=>{n=!0,e()}),500);return[{eventName:"onKeyDown",filter:(e,t)=>"Multi"===e.selectionType&&function(e){return"KeyA"===e.code&&(e.metaKey||e.ctrlKey)}(t),handler:l},{eventName:"onKeyUp",filter:(e,t)=>"Multi"===e.selectionType&&p.has(t.code)&&n,handler:()=>{n=!1,i(),null==t||t()}}]},f="com.mendix.widgets.web.selectable.selectionContext";class b{constructor(e,t){var n=this;this.selection=e,this.selectionHelper=t,this.onSelect=function(){n.selectionHelper&&("Multi"===n.selectionHelper.type?n._onSelectItemMulti(...arguments):n._onSelectItemSingle(...arguments))},this._onSelectItemMulti=(e,t,n)=>{var l;"Multi"===(null===(l=this.selectionHelper)||void 0===l?void 0:l.type)&&(t?this.selectionHelper.selectUpTo(e):this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):n?this.selectionHelper.add(e):this.selectionHelper.reduceTo(e))},this._onSelectItemSingle=e=>{var t;"Single"===(null===(t=this.selectionHelper)||void 0===t?void 0:t.type)&&(this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):this.selectionHelper.add(e))},this.onSelectAll=e=>{this.selectionHelper&&("Single"!==this.selectionHelper.type?"selectAll"!==e&&"all"===this.selectionHelper.selectionStatus?this.selectionHelper.selectNone():this.selectionHelper.selectAll():console.warn("Datagrid: calling onSelectAll in single selection mode have no effect"))},this.onSelectAdjacent=function(){var e;"Multi"===(null===(e=n.selectionHelper)||void 0===e?void 0:e.type)&&n.selectionHelper.selectUpToAdjacent(...arguments)},this.isSelected=e=>!!this.selectionHelper&&this.selectionHelper.isSelected(e)}get selectionType(){if(void 0===this.selection)return"None";if("object"==typeof this.selection)return this.selection.type;if("None"===this.selection||"Single"===this.selection||"Multi"===this.selection)return this.selection;throw new Error("Unknown selection type: ".concat(this.selection))}}function w(){const e=window["com.mendix.widgets.web.sortable.sortContext"];if(e)return{SortContext:e};const n=t.createContext(void 0);return window["com.mendix.widgets.web.sortable.sortContext"]=n,{SortContext:n}}function y(e){let{direction:n}=e;const l="pagination-icon ".concat(n);switch(n){case"forward":return t.createElement("span",{"aria-hidden":!0},t.createElement("svg",{className:l,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),t.createElement("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})));case"step-forward":return t.createElement("span",{"aria-hidden":!0},t.createElement("svg",{className:l,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),t.createElement("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})));case"backward":return t.createElement("span",{"aria-hidden":!0},t.createElement("svg",{className:l,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),t.createElement("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})));case"step-backward":return t.createElement("span",{"aria-hidden":!0},t.createElement("svg",{className:l,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),t.createElement("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})));default:return t.createElement("div",null)}}function S(e){var n,l,i,o,s,a,r;const c=void 0!==e.numberOfItems?Math.ceil(e.numberOfItems/e.pageSize):void 0,u=void 0!==c?c-1:0,d=void 0!==c,g=e.page*e.pageSize+1,m=e.canNextPage||!e.numberOfItems?(e.page+1)*e.pageSize:e.numberOfItems,h=t=>{e.setPaginationIndex&&e.setPaginationIndex(t)};if(0===e.numberOfItems)return null;const p="".concat(g," to ").concat(m," ").concat(d?"of ".concat(null!==(n=e.numberOfItems)&&void 0!==n?n:(null!=c?c:1)*e.pageSize):"");return t.createElement("div",{"aria-label":null!==(l=e.labelPagination)&&void 0!==l?l:"Pagination",className:"pagination-bar"},t.createElement("button",{className:"btn pagination-button",disabled:0===e.page,...E((()=>{e.gotoPage(0),h(0)})),"aria-label":null!==(i=e.labelFirstPage)&&void 0!==i?i:"Go to first page"},t.createElement(y,{direction:"step-backward"})),t.createElement("button",{className:"btn pagination-button",disabled:!e.canPreviousPage,...E((()=>{e.previousPage(),h(e.page-1)})),"aria-label":null!==(o=e.labelPreviousPage)&&void 0!==o?o:"Go to previous page"},t.createElement(y,{direction:"backward"})),t.createElement("span",{className:"sr-only sr-only-focusable"},null!==(s=e.labelPagingStatus)&&void 0!==s?s:"Currently showing"," ",p),t.createElement("div",{"aria-hidden":!0,className:"paging-status"},p),t.createElement("button",{"aria-label":null!==(a=e.labelNextPage)&&void 0!==a?a:"Go to next page",className:"btn pagination-button",disabled:!e.canNextPage,...E((()=>{e.nextPage(),h(e.page+1)}))},t.createElement(y,{direction:"forward"})),d&&t.createElement("button",{"aria-label":null!==(r=e.labelLastPage)&&void 0!==r?r:"Go to last page",className:"btn pagination-button",disabled:e.page===u,...E((()=>{e.gotoPage(u),h(u)}))},t.createElement(y,{direction:"step-forward"})))}function E(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}var C,I={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */C=I,function(){var e={}.hasOwnProperty;function t(){for(var n=[],l=0;l<arguments.length;l++){var i=arguments[l];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)){if(i.length){var s=t.apply(null,i);s&&n.push(s)}}else if("object"===o){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){n.push(i.toString());continue}for(var a in i)e.call(i,a)&&i[a]&&n.push(a)}}}return n.join(" ")}C.exports?(t.default=t,C.exports=t):window.classNames=t}();var x=I.exports;function M(e){let{children:n,className:l,selectionType:i,lg:o,md:s,sm:a,...r}=e;const c="None"!==i;return t.createElement("div",{...r,className:x("widget-gallery-items","widget-gallery-lg-".concat(o),"widget-gallery-md-".concat(s),"widget-gallery-sm-".concat(a),l),role:c?"listbox":"list","aria-multiselectable":c?"Multi"===i:void 0},n)}function P(e){let{children:n,className:l,helper:i,item:o,selectHelper:s,eventsController:a,...r}=e;const c=i.hasOnClick(o)||"None"!==s.selectionType,u=function(e,t){return"Single"===t.selectionType||"Multi"===t.selectionType?{role:"option","aria-selected":t.isSelected(e),tabIndex:0}:{role:"listitem","aria-selected":void 0,tabIndex:void 0}}(o,s),d=t.useMemo((()=>a.getProps(o)),[a,o]);return t.createElement("div",{...r,className:x("widget-gallery-item",{"widget-gallery-clickable":c,"widget-gallery-selected":u["aria-selected"]},i.itemClass(o)),...u,onClick:d.onClick,onDoubleClick:d.onDoubleClick,onFocus:d.onFocus,onKeyDown:d.onKeyDown,onKeyUp:d.onKeyUp,onMouseDown:d.onMouseDown},i.render(o))}function N(e){var n,l;const[i,o]=t.useState(!1),s=null!==(l=(n=t.useRef()).current)&&void 0!==l?l:n.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver((e=>{let[n]=e;t(n.isIntersecting)}))}({setIsIntersecting:o});return t.useEffect((()=>(e.current&&s.observe(e.current),()=>{s.disconnect()})),[s,e]),i}const k=30;function V(e){let{children:n,className:l,hasMoreItems:i,isInfinite:o,setPage:s}=e;const[a,r,c]=function(e){const{setPage:n,hasMoreItems:l,isInfinite:i}=e,[o,s]=t.useState(0),a=t.useRef(null),r=N(a),c=t.useCallback((e=>{Math.floor(e.target.scrollHeight-k-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&l&&n&&n((e=>e+1))}),[l,n]),u=t.useCallback((()=>{r&&i&&l&&o<=0&&a.current&&s(a.current.clientHeight-k)}),[i,l,o,r]);return t.useLayoutEffect((()=>{setTimeout((()=>u()),100)}),[u]),[c,o,a]}({hasMoreItems:i,isInfinite:o,setPage:s});return t.createElement("div",{className:x("widget-gallery-content",{"infinite-loading":o},l),ref:c,onScroll:o?a:void 0,style:o&&r>0?{maxHeight:r}:void 0},n)}function _(e){let{children:n,className:l,...i}=e;return t.createElement("div",{className:x("widget-gallery-footer",l),...i},n)}function T(e){const{children:n}=e;return n?t.createElement("section",{...e,className:"widget-gallery-header widget-gallery-filter"}):null}function R(e){const{className:n,selectable:l,children:i,...o}=e;return t.createElement("div",{className:x("widget-gallery",{"widget-gallery-selectable":l},n),...o},i)}function H(e){return t.createElement("div",{className:"widget-gallery-top-bar"},e.children)}function D(e){const n=e.paging?t.createElement("div",{className:"widget-gallery-pagination"},t.createElement(S,{canNextPage:e.hasMoreItems,canPreviousPage:0!==e.page,gotoPage:t=>e.setPage&&e.setPage((()=>t)),nextPage:()=>e.setPage&&e.setPage((e=>e+1)),numberOfItems:e.numberOfItems,page:e.page,pageSize:e.pageSize,previousPage:()=>e.setPage&&e.setPage((e=>e-1))})):null,l=e.paging&&"above"===e.paginationPosition,i=e.paging&&"below"===e.paginationPosition;return t.createElement(R,{className:e.className,selectable:!1,"data-focusindex":e.tabIndex||0},l&&t.createElement(H,null,n),e.showHeader&&t.createElement(T,{"aria-label":e.headerTitle},e.header),t.createElement(V,{hasMoreItems:e.hasMoreItems,setPage:e.setPage,isInfinite:!e.paging},e.items.length>0&&t.createElement(M,{lg:e.desktopItems,md:e.tabletItems,sm:e.phoneItems,selectionType:e.selectHelper.selectionType,"aria-label":e.ariaLabelListBox},e.items.map((n=>t.createElement(P,{key:"item_".concat(n.id),helper:e.itemHelper,item:n,selectHelper:e.selectHelper,eventsController:e.itemEventsController}))))),(0===e.items.length||e.showEmptyStatePreview)&&e.emptyPlaceholderRenderer&&e.emptyPlaceholderRenderer((n=>t.createElement("section",{className:"widget-gallery-empty","aria-label":e.emptyMessageTitle},t.createElement("div",{className:"empty-placeholder"},n)))),i&&t.createElement(_,null,n))}function A(e){return t.createElement("div",{...e,...O,className:x("widget-gallery-item-button",e.className),role:"button",tabIndex:0})}const O=function(){let e=!1;return{onKeyDown:t=>{L(t)&&(F(t),K(t)&&(e=!0))},onKeyUp:t=>{L(t)&&K(t)&&e&&(F(t),t.currentTarget.dispatchEvent(new MouseEvent("click",{bubbles:!0})),e=!1)}}}();function L(e){return"Enter"===e.code||"Space"===e.code}function K(e){return e.currentTarget===e.target}function F(e){e.stopPropagation(),e.preventDefault()}class U{constructor(e,t,n){this._classValue=e,this._contentValue=t,this._clickValue=n}itemClass(e){var t;return null===(t=this._classValue)||void 0===t?void 0:t.get(e).value}render(e){var n,l;return this.hasOnClick(e)?t.createElement(A,{onClick:()=>{var t;return u(null===(t=this._clickValue)||void 0===t?void 0:t.get(e))}},null===(n=this._contentValue)||void 0===n?void 0:n.get(e)):null===(l=this._contentValue)||void 0===l?void 0:l.get(e)}hasOnClick(e){var t;return!!(null===(t=this._clickValue)||void 0===t?void 0:t.get(e))}}class z extends b{}function j(e,t,n){const l=e();(!n.filter||n.filter(l,t))&&n.handler(l,t)}function B(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}const Z=()=>{Z.timeoutId&&clearTimeout(Z.timeoutId),Z.timeoutId=window.setTimeout((()=>{B(),document.body.style.userSelect="",Z.timeoutId=void 0}),250)},G=e=>({eventName:"onClick",filter:e=>"None"!==e.selectionType,handler:(t,n)=>{let{item:l}=t;const i=n.metaKey||n.ctrlKey;e(l,n.shiftKey,i)}});function W(e,t){return[G(e),(n=B,{eventName:"onMouseDown",filter:e=>"None"!==e.selectionType,handler:n}),...v((()=>{document.body.style.userSelect="none",t("selectAll")}),(()=>{Z()}))];var n}class q{constructor(e,t,n){this.contextFactory=e,this.selectFx=t,this.selectAllFx=n,this.getProps=e=>function(e,t){const n=function(e){return e.reduce(((e,t)=>{var n,l,i,o,s,a;switch(t.eventName){case"onClick":e.onClick=null!==(n=e.onClick)&&void 0!==n?n:[],e.onClick.push(t);break;case"onDoubleClick":e.onDoubleClick=null!==(l=e.onDoubleClick)&&void 0!==l?l:[],e.onDoubleClick.push(t);break;case"onKeyDown":e.onKeyDown=null!==(i=e.onKeyDown)&&void 0!==i?i:[],e.onKeyDown.push(t);break;case"onKeyUp":e.onKeyUp=null!==(o=e.onKeyUp)&&void 0!==o?o:[],e.onKeyUp.push(t);break;case"onMouseDown":e.onMouseDown=null!==(s=e.onMouseDown)&&void 0!==s?s:[],e.onMouseDown.push(t);break;case"onFocus":e.onFocus=null!==(a=e.onFocus)&&void 0!==a?a:[],e.onFocus.push(t)}return e}),{})}(t);return{onClick(t){var l;null===(l=n.onClick)||void 0===l||l.forEach((n=>j(e,t,n)))},onDoubleClick(t){var l;null===(l=n.onDoubleClick)||void 0===l||l.forEach((n=>j(e,t,n)))},onKeyUp(t){var l;null===(l=n.onKeyUp)||void 0===l||l.forEach((n=>j(e,t,n)))},onKeyDown(t){var l;null===(l=n.onKeyDown)||void 0===l||l.forEach((n=>j(e,t,n)))},onMouseDown(t){var l;null===(l=n.onMouseDown)||void 0===l||l.forEach((n=>j(e,t,n)))},onFocus(t){var l;null===(l=n.onFocus)||void 0===l||l.forEach((n=>j(e,t,n)))}}}((()=>this.contextFactory(e)),[...W(this.selectFx,this.selectAllFx)])}}e.Gallery=function(e){var i,s,a,c,u;const d=t.useRef(void 0),g=t.useRef(void 0),[m,p]=t.useState(!1),[v,b]=t.useState(!1),y={[l.STRING]:t.useState(),[l.NUMBER]:t.useState(),[l.DATE]:t.useState(),[l.ENUMERATION]:t.useState(),[l.ASSOCIATION]:t.useState()},[S,E]=t.useState(),{FilterContext:C}=o(),{SortContext:I}=w(),x=(void 0===window[f]&&(window[f]=t.createContext(void 0)),window[f]),M="virtualScrolling"===e.pagination,P=M?e.datasource.limit/e.pageSize:e.datasource.offset/e.pageSize;t.useEffect((()=>{e.datasource.requestTotalCount(!M),e.datasource.limit===Number.POSITIVE_INFINITY&&e.datasource.setLimit(e.pageSize)}),[e.datasource,e.pageSize,M]),t.useEffect((()=>{!e.datasource.filter||m||d.current||(d.current=e.datasource.filter),!e.datasource.sortOrder||v||g.current||(g.current=e.datasource.sortOrder)}),[e.datasource,m,v]);const N=t.useMemo((()=>e.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:n}}),{})),[e.filterList]),k=t.useMemo((()=>e.sortList.map((e=>{let{attribute:t,caption:n}=e;var l;return{attribute:t,caption:null!==(l=n.value)&&void 0!==l?l:""}}))),[e.sortList]),V=t.useMemo((()=>e.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:r(n,d.current)}}),{})),[e.filterList,d.current]),_=Object.keys(y).map((e=>{var t;return null===(t=y[e][0])||void 0===t?void 0:t.getFilterCondition()})).filter((e=>void 0!==e));if(_.length>0?e.datasource.setFilter(_.length>1?n.and(..._):_[0]):m?e.datasource.setFilter(void 0):e.datasource.setFilter(d.current),S&&"getSortCondition"in S){const t=S.getSortCondition();e.datasource.setSortOrder(t?[t]:void 0)}else e.datasource.setSortOrder(void 0);const T=t.useCallback((t=>{const n=t(P);M?e.datasource.setLimit(n*e.pageSize):e.datasource.setOffset(n*e.pageSize)}),[e.datasource,e.pageSize,M,P]),R=h(e.itemSelection,e.datasource,e.onSelectionChange),H=function(e,n){return t.useMemo((()=>new z(e,n)),[n])}(e.itemSelection,R),A=function(e){return t.useMemo((()=>new q((t=>({item:t,selectionType:e.selectionType})),e.onSelect,e.onSelectAll)),[e])}(H),O=function(e){const n=t.useCallback((()=>{"Multi"===(null==e?void 0:e.type)&&("all"===e.selectionStatus?e.selectNone():e.selectAll())}),[e]),l="Multi"===(null==e?void 0:e.type)?e.selectionStatus:void 0;return t.useMemo((()=>{if(void 0!==l)return{status:l,toggle:n}}),[l,n])}(R),L=e.filterList.length>0||e.sortList.length>0||"Multi"===(null==R?void 0:R.type),K=(F={classValue:e.itemClass,contentValue:e.content,clickValue:e.onClick},t.useMemo((()=>new U(F.classValue,F.contentValue,F.clickValue)),[F.classValue,F.contentValue,F.clickValue]));var F;return t.createElement(D,{className:e.class,desktopItems:e.desktopItems,emptyPlaceholderRenderer:t.useCallback((n=>"custom"===e.showEmptyPlaceholder?n(e.emptyPlaceholder):t.createElement("div",null)),[e.emptyPlaceholder,e.showEmptyPlaceholder]),emptyMessageTitle:null===(i=e.emptyMessageTitle)||void 0===i?void 0:i.value,header:t.useMemo((()=>L?t.createElement(C.Provider,{value:{filterDispatcher:e=>{if(e.filterType){const[,t]=y[e.filterType];t(e),p(!0)}return e},multipleAttributes:N,multipleInitialFilters:V}},t.createElement(I.Provider,{value:{sortDispatcher:e=>(b(!0),E(e),e),attributes:k,initialSort:g.current}},t.createElement(x.Provider,{value:O},e.filtersPlaceholder))):null),[C,I,y,N,V,L,e.filtersPlaceholder,k]),headerTitle:null===(s=e.filterSectionTitle)||void 0===s?void 0:s.value,ariaLabelListBox:null===(a=e.ariaLabelListBox)||void 0===a?void 0:a.value,showHeader:L,hasMoreItems:null!==(c=e.datasource.hasMoreItems)&&void 0!==c&&c,items:null!==(u=e.datasource.items)&&void 0!==u?u:[],itemHelper:K,numberOfItems:e.datasource.totalCount,page:P,pageSize:e.pageSize,paging:"buttons"===e.pagination,paginationPosition:e.pagingPosition,phoneItems:e.phoneItems,setPage:T,tabletItems:e.tabletItems,tabIndex:e.tabIndex,selectHelper:H,itemEventsController:A})},Object.defineProperty(e,"__esModule",{value:!0})}));
